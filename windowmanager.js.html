<!DOCTYPE html>
<html>
<head>
  <title>windowmanager.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="doc-style.css" />
  <script src="doc-filelist.js"></script>
  <script>
    var relativeDir = "", thisFile = "windowmanager.js", defaultSidebar = true;
  </script>
  <script src="doc-script.js"></script>
  <link rel="stylesheet" href="docs-style.css" />
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>windowmanager.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>
<div class="dox">
  <div class="summary">
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">version</div>
    <div class="dox_tag_detail">
      <span>0.0.2
</span>
    </div>
    <div class="dox_tag_title">fileOverview</div>
    <div class="dox_tag_detail">
      <span>Helps manage windows in the browser.
Has a number of useful window functions including -
1) Communicating between windows on the same domain and &#39;namespace&#39;
2) Storing properties associated with windows
3) Opening, closing and focusing windows as well as remembering window properties
4) Animating windows
Extremely useful for browser applications dealing with several different pages at the same
time. Simplifies communication and management.
Lets you specify a &#39;master&#39; window that can control &#39;sub&#39; windows.
A master window may contain other popup windows under it. These are automatically opened
when the master windowManager is instantiated and their properties like width, height etc
are retained from the last time the master window was closed.
Can also make sure of window uniqueness by referencing a &#39;name&#39; property of each WindowManager
instance.
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">factory</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">define</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2">&#182;</a>
</div>
<p>AMD. Register as an anonymous module.</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">define</span><span class="p">([</span>
            <span class="s1">&#39;jquery&#39;</span><span class="p">,</span>
            <span class="s1">&#39;backbone-events-standalone&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/object/extend&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/function/delay&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/lang/isObject&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/collection/each&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/lang/cloneDeep&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/function/bind&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/math/min&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/math/max&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/lang/toArray&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/array/without&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/object/keys&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/lang/isEqual&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/function/debounce&#39;</span><span class="p">,</span>
            <span class="s1">&#39;lodash/collection/reduce&#39;</span>
        <span class="p">],</span> <span class="kd">function</span> <span class="p">(</span>
                <span class="nx">$</span><span class="p">,</span>
                <span class="nx">events</span><span class="p">,</span>
                <span class="nx">extend</span><span class="p">,</span>
                <span class="nx">delay</span><span class="p">,</span>
                <span class="nx">isObject</span><span class="p">,</span>
                <span class="nx">each</span><span class="p">,</span>
                <span class="nx">cloneDeep</span><span class="p">,</span>
                <span class="nx">bind</span><span class="p">,</span>
                <span class="nx">min</span><span class="p">,</span>
                <span class="nx">max</span><span class="p">,</span>
                <span class="nx">toArray</span><span class="p">,</span>
                <span class="nx">without</span><span class="p">,</span>
                <span class="nx">keys</span><span class="p">,</span>
                <span class="nx">isEqual</span><span class="p">,</span>
                <span class="nx">debounce</span><span class="p">,</span>
                <span class="nx">reduce</span>
            <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">WindowManager</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">(</span>
                <span class="nx">$</span><span class="p">,</span>
                <span class="nx">events</span><span class="p">,</span>
                <span class="nx">extend</span><span class="p">,</span>
                <span class="nx">delay</span><span class="p">,</span>
                <span class="nx">isObject</span><span class="p">,</span>
                <span class="nx">each</span><span class="p">,</span>
                <span class="nx">cloneDeep</span><span class="p">,</span>
                <span class="nx">bind</span><span class="p">,</span>
                <span class="nx">min</span><span class="p">,</span>
                <span class="nx">max</span><span class="p">,</span>
                <span class="nx">toArray</span><span class="p">,</span>
                <span class="nx">without</span><span class="p">,</span>
                <span class="nx">keys</span><span class="p">,</span>
                <span class="nx">isEqual</span><span class="p">,</span>
                <span class="nx">debounce</span><span class="p">,</span>
                <span class="nx">reduce</span>
            <span class="p">));</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3">&#182;</a>
</div>

<div class="highlight"><pre><code>   <span class="nx">Browser</span> <span class="nx">globals</span>
</code></pre></div>


        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">$</span><span class="p">,</span>
            <span class="nx">events</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">BackboneEvents</span><span class="p">,</span>
            <span class="nx">extend</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">,</span>
            <span class="nx">delay</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">delay</span><span class="p">,</span>
            <span class="nx">isObject</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">,</span>
            <span class="nx">each</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">,</span>
            <span class="nx">cloneDeep</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">cloneDeep</span><span class="p">,</span>
            <span class="nx">bind</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">bind</span><span class="p">,</span>
            <span class="nx">min</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">min</span><span class="p">,</span>
            <span class="nx">max</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">max</span><span class="p">,</span>
            <span class="nx">toArray</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">toArray</span><span class="p">,</span>
            <span class="nx">without</span>  <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">without</span><span class="p">,</span>
            <span class="nx">keys</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">keys</span><span class="p">,</span>
            <span class="nx">isEqual</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">,</span>
            <span class="nx">debounce</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">debounce</span><span class="p">,</span>
            <span class="nx">reduce</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">reduce</span><span class="p">;</span>

        <span class="nx">root</span><span class="p">.</span><span class="nx">WindowManager</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">(</span>
            <span class="nx">$</span><span class="p">,</span>
            <span class="nx">events</span><span class="p">,</span>
            <span class="nx">extend</span><span class="p">,</span>
            <span class="nx">delay</span><span class="p">,</span>
            <span class="nx">isObject</span><span class="p">,</span>
            <span class="nx">each</span><span class="p">,</span>
            <span class="nx">cloneDeep</span><span class="p">,</span>
            <span class="nx">bind</span><span class="p">,</span>
            <span class="nx">min</span><span class="p">,</span>
            <span class="nx">max</span><span class="p">,</span>
            <span class="nx">toArray</span><span class="p">,</span>
            <span class="nx">without</span><span class="p">,</span>
            <span class="nx">keys</span><span class="p">,</span>
            <span class="nx">isEqual</span><span class="p">,</span>
            <span class="nx">debounce</span><span class="p">,</span>
            <span class="nx">reduce</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">events</span><span class="p">,</span> <span class="nx">extend</span><span class="p">,</span> <span class="nx">delay</span><span class="p">,</span> <span class="nx">isObject</span><span class="p">,</span> <span class="nx">each</span><span class="p">,</span> <span class="nx">cloneDeep</span><span class="p">,</span> <span class="nx">bind</span><span class="p">,</span> <span class="nx">_min</span><span class="p">,</span> <span class="nx">_max</span><span class="p">,</span> <span class="nx">toArray</span><span class="p">,</span> <span class="nx">_without</span><span class="p">,</span> <span class="nx">_keys</span><span class="p">,</span> <span class="nx">_isEqual</span><span class="p">,</span> <span class="nx">_debounce</span><span class="p">,</span> <span class="nx">_reduce</span><span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h2 id="internal-helpers">INTERNAL HELPERS</h2>

  </div>
  <div class="body">
  </div>
</div>
<div class="dox">
  <div class="summary"><p>Is the given window a popup window.
Not 100% reliable -- must be called while
the opener is still open aka immediately
after popup is opened</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">win
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">boolean

</span>
      <span>{boolean}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">isPopupWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">win</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">win</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">bool</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="nx">bool</span> <span class="o">=</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">win</span><span class="p">.</span><span class="nx">opener</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="nx">bool</span><span class="p">;</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Is the browser environment macintosh</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">boolean

</span>
      <span>{boolean}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">isMac</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;Mac OS X&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Is the browser less than IE9</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">number

</span>
      <span>{number}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">isOldIE</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">undef</span><span class="p">,</span>
            <span class="nx">v</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
            <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">),</span>
            <span class="nx">all</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span>
            <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;&lt;!--[if gt IE &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="o">++</span><span class="nx">v</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;]&gt;&lt;i&gt;&lt;/i&gt;&lt;![endif]--&gt;&#39;</span><span class="p">,</span>
                <span class="nx">all</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">);</span>
        <span class="k">return</span> <span class="nx">v</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="nx">undef</span><span class="p">;</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7">&#182;</a>
</div>
<p>Check if the page visibility api exists and visibilityState is equal to
passed in value</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">isPageVisibility</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">stateValue</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">stateValue</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">hiddenProp</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">document</span><span class="p">.</span><span class="nx">visibilityState</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Opera 12.10 and Firefox 18 and later support</span>
            <span class="nx">hiddenProp</span> <span class="o">=</span> <span class="s2">&quot;visibilityState&quot;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">document</span><span class="p">.</span><span class="nx">mozVisibilityState</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">hiddenProp</span> <span class="o">=</span> <span class="s2">&quot;mozVisibilityState&quot;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">document</span><span class="p">.</span><span class="nx">msVisibilityState</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">hiddenProp</span> <span class="o">=</span> <span class="s2">&quot;msVisibilityState&quot;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">document</span><span class="p">.</span><span class="nx">webkitVisibilityState</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">hiddenProp</span> <span class="o">=</span> <span class="s2">&quot;webkitVisibilityState&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nb">document</span><span class="p">[</span><span class="nx">hiddenProp</span><span class="p">]</span> <span class="o">===</span> <span class="nx">stateValue</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">isPageHidden</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8">&#182;</a>
</div>
<p>Set the name of the hidden property and the change event for visibility</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">hidden</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">document</span><span class="p">.</span><span class="nx">hidden</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Opera 12.10 and Firefox 18 and later support</span>
            <span class="nx">hidden</span> <span class="o">=</span> <span class="s2">&quot;hidden&quot;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">document</span><span class="p">.</span><span class="nx">mozHidden</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">hidden</span> <span class="o">=</span> <span class="s2">&quot;mozHidden&quot;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">document</span><span class="p">.</span><span class="nx">msHidden</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">hidden</span> <span class="o">=</span> <span class="s2">&quot;msHidden&quot;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">document</span><span class="p">.</span><span class="nx">webkitHidden</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">hidden</span> <span class="o">=</span> <span class="s2">&quot;webkitHidden&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nb">document</span><span class="p">[</span><span class="nx">hidden</span><span class="p">]);</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Is the browser Chrome</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">boolean

</span>
      <span>{boolean}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">isChrome</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="sr">/Chrome/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">)</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Is the browser Firefox</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">boolean

</span>
      <span>{boolean}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">isFirefox</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;firefox&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11">&#182;</a>
</div>
<div class="dox">
  <div class="summary">
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Type</div>
    <div class="dox_tag_detail">
      <span class="dox_type">wmKey:string</span>
      <span class="dox_type">msgTimeout:number</span>
      <span class="dox_type">hasNativeWindowFocus:hasNativeWindowFocus</span>
      <span class="dox_type">isMac:boolean</span>
      <span class="dox_type">hasSelfTriggerError:number</span>
      <span class="dox_type">hasDoubleUnloadBug:boolean</span>
      <span class="dox_type">isValidWindow:isValidWindow</span>
      <span class="dox_type">getUniqueWindowName:getUniqueWindowName

</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">Config</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">wmKey</span><span class="o">:</span> <span class="s2">&quot;__windowManager&quot;</span><span class="p">,</span>
        <span class="nx">msgTimeout</span><span class="o">:</span> <span class="mi">60000</span><span class="p">,</span>
        <span class="nx">popupDelay</span><span class="o">:</span> <span class="mi">2000</span><span class="p">,</span>
        <span class="nx">defaultPopupHeight</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
        <span class="nx">defaultPopupWidth</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
        <span class="nx">macChromeHeight</span><span class="o">:</span> <span class="mi">52</span><span class="p">,</span>
        <span class="nx">winChromeHeight</span><span class="o">:</span> <span class="mi">75</span><span class="p">,</span>
        <span class="nx">macMinWindowHeight</span><span class="o">:</span><span class="mi">122</span><span class="p">,</span>
        <span class="nx">winMinWindowHeight</span><span class="o">:</span> <span class="mi">75</span><span class="p">,</span>
        <span class="nx">macMinWindowWidth</span><span class="o">:</span> <span class="mi">310</span><span class="p">,</span>
        <span class="nx">winMinWindowWidth</span><span class="o">:</span> <span class="mi">158</span><span class="p">,</span>
        <span class="nx">hasNativeWindowFocus</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">isMac</span><span class="o">:</span> <span class="nx">isMac</span><span class="p">(),</span>
        <span class="nx">isChrome</span><span class="o">:</span> <span class="nx">isChrome</span><span class="p">(),</span>
        <span class="nx">hasSelfTriggerError</span><span class="o">:</span> <span class="nx">isOldIE</span><span class="p">(),</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12">&#182;</a>
</div>
<p>Don&#39;t need this anymore because of delay before adding unload.
Otherwise when you open a popup the page causes an unload event when redirecting
the page to the url provided for the popup on some browsers.</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">hasDoubleUnloadBug</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">isValidWindow</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">win</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">valid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="nx">valid</span> <span class="o">=</span> <span class="nx">win</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">win</span><span class="p">.</span><span class="nx">outerHeight</span> <span class="o">&amp;&amp;</span> <span class="nx">win</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isPageVisibility</span><span class="p">(</span><span class="s2">&quot;prerender&quot;</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">valid</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">isPageVisibility</span><span class="o">:</span> <span class="nx">isPageVisibility</span><span class="p">,</span>
        <span class="nx">isHiddenWindow</span><span class="o">:</span> <span class="nx">isPageHidden</span><span class="p">,</span>
        <span class="nx">getUniqueWindowName</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="nx">parent</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">isPopupWindow</span><span class="o">:</span> <span class="nx">isPopupWindow</span><span class="p">(),</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Get window dimensions adjusted for window chrome on some
environments.
At the moment this is only present on chrome for windows</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">getAdjustedWindowDimensions</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">retObj</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">width</span><span class="o">:</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                <span class="nx">height</span><span class="o">:</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">height</span>
            <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14">&#182;</a>
</div>
<p>Do adjustments only for non-mac chrome</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">Config</span><span class="p">.</span><span class="nx">isChrome</span> <span class="o">||</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">isMac</span> <span class="o">||</span> <span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">outerWidth</span> <span class="o">||</span> <span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">)</span> <span class="k">return</span> <span class="nx">retObj</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">heightDiff</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Config</span><span class="p">.</span><span class="nx">isPopupWindow</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">outerHeight</span> <span class="o">-</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">outerHeight</span> <span class="o">-</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.9</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">widthDiff</span> <span class="o">=</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">outerWidth</span> <span class="o">-</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">width</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">retObj</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">widthDiff</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">height</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">retObj</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="nx">heightDiff</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">retObj</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h2 id="initialization">INITIALIZATION</h2>

  </div>
  <div class="body">
  </div>
</div>
<div class="dox">
  <div class="summary"><h4 id="example-of-initializing-a-_-parent-_-windowmanager-instance">Example of initializing a <em>&#39;parent&#39;</em> WindowManager instance</h4>

<div class="highlight"><pre><code><span class="k">new</span> <span class="nx">WindowManager</span><span class="p">({</span>
<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;parentPage&#39;</span><span class="p">,</span>
<span class="nx">namespace</span><span class="o">:</span> <span class="s1">&#39;windowManager01&#39;</span><span class="p">,</span>
<span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;master&#39;</span>
<span class="p">});</span>
</code></pre></div>


<h4 id="example-of-initializing-a-_-sub-_-windowmanager-instance">Example of initializing a <em>&#39;sub&#39;</em> WindowManager instance</h4>

<div class="highlight"><pre><code><span class="k">new</span> <span class="nx">WindowManager</span><span class="p">({</span>
<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;subPage1&#39;</span><span class="p">,</span>
<span class="nx">namespace</span><span class="o">:</span> <span class="s1">&#39;windowManager01&#39;</span><span class="p">,</span>
<span class="nx">parent</span><span class="o">:</span> <span class="s1">&#39;parentPage&#39;</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div>


<h4 id="example-of-initializing-an-_-external-_-windowmanager-instance">Example of initializing an <em>&#39;external&#39;</em> WindowManager instance</h4>

<div class="highlight"><pre><code><span class="k">new</span> <span class="nx">WindowManager</span><span class="p">({</span>
<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;externalPopup&#39;</span><span class="p">,</span>
<span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;external&#39;</span><span class="p">,</span>
<span class="nx">namespace</span><span class="o">:</span> <span class="s1">&#39;windowManager01&#39;</span>
<span class="p">});</span>
</code></pre></div>



  </div>
  <div class="body">
  </div>
</div>
<div class="dox">
  <div class="summary">
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.name</span>
      <span>{string} Name to register current window as
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.namespace</span>
      <span>{string} The namespace to use in localStorage
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.parent</span>
      <span>{string} The &#39;name&#39; of the parent window. Not required if <em>type</em> is <em>&#39;master&#39;</em>.
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.type</span>
      <span>{string} Can be either <em>&#39;master&#39;</em>, <em>&#39;sub&#39;</em> or <em>&#39;external&#39;</em>
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.suppressMessageCheck</span>
      <span>{boolean} Whether to <em>not</em> check messages on initial page load.
Useful when window manager is instantiated before we want any of the attached events handlers to execute.
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>
</span>
      <span>{</em>}
</span>
    </div>
    <div class="dox_tag_title">constructor

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">WindowManager</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16">&#182;</a>
</div>
<p>Error check</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">[</span><span class="nx">Config</span><span class="p">.</span><span class="nx">wmKey</span><span class="p">])</span> <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Window Manager already exists on window with namespace&#39;</span><span class="p">,</span> <span class="nb">window</span><span class="p">[</span><span class="nx">Config</span><span class="p">.</span><span class="nx">wmKey</span><span class="p">].</span><span class="nx">namespace</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17">&#182;</a>
</div>
<p>Add instance to window</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nb">window</span><span class="p">[</span><span class="nx">Config</span><span class="p">.</span><span class="nx">wmKey</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18">&#182;</a>
</div>
<p>Namespace for data in localStorage</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">namespace</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19">&#182;</a>
</div>
<p>Extend the config</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">config</span><span class="p">)</span> <span class="nx">extend</span><span class="p">(</span><span class="nx">Config</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">config</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20">&#182;</a>
</div>
<p>Expose the valid window check</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">isValidWindow</span> <span class="o">=</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">isValidWindow</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21">&#182;</a>
</div>
<p>Map to hold window references</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">windowRefs</span> <span class="o">=</span> <span class="p">{};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22">&#182;</a>
</div>
<p>Map to hold temporary value for windows being opened</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">beingOpened</span> <span class="o">=</span> <span class="p">{};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23">&#182;</a>
</div>
<p>Error check</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">name</span><span class="o">==</span><span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="k">typeof</span> <span class="k">this</span><span class="p">.</span><span class="nx">namespace</span><span class="o">==</span><span class="s2">&quot;string&quot;</span><span class="p">))</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Invalid options for WindowManager&#39;</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24">&#182;</a>
</div>
<p>Register the window</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">_registerWindow</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
            <span class="nx">type</span><span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
            <span class="nx">parent</span><span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">parent</span>
        <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25">&#182;</a>
</div>
<p>Setup all listeners</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">_setupEventBindings</span><span class="p">();</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26">&#182;</a>
</div>
<p>Special handling for a master window on init</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="nx">_this</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;master&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">delay</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
                <span class="nx">_this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
                <span class="nx">_this</span><span class="p">.</span><span class="nx">_clearOldMessages</span><span class="p">();</span>
                <span class="nx">_this</span><span class="p">.</span><span class="nx">clearAllMessagesForParent</span><span class="p">(</span><span class="nx">_this</span><span class="p">.</span><span class="nx">parent</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">currentCachedWindow</span> <span class="o">=</span> <span class="nx">_this</span><span class="p">.</span><span class="nx">_getCurrentCachedWindow</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">silentReopen</span> <span class="o">=</span> <span class="nx">currentCachedWindow</span><span class="p">.</span><span class="nx">silentReopen</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">silentReopen</span><span class="p">)</span> <span class="nx">_this</span><span class="p">.</span><span class="nx">openAllChildren</span><span class="p">();</span>
                <span class="k">delete</span> <span class="nx">currentCachedWindow</span><span class="p">.</span><span class="nx">silentReopen</span><span class="p">;</span>
                <span class="nx">_this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
            <span class="p">},</span> <span class="mi">100</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">suppressMessageCheck</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_checkMessages</span><span class="p">();</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27">&#182;</a>
</div>
<p>Add events system</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">extend</span><span class="p">(</span><span class="nx">WindowManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">events</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28">&#182;</a>
</div>
<p>Declare prototype for convenience</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">wm</span> <span class="o">=</span> <span class="nx">WindowManager</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h2 id="public-functions">PUBLIC FUNCTIONS</h2>

  </div>
  <div class="body">
  </div>
</div>
<div class="dox">
  <div class="summary">
  </div>
  <div class="body"><h4 id="send">send</h4>
<p>Function to send messages across windows.
Any additional arguments are passed on to as the second arguments of the message callback</p>

  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj.name</span>
      <span>{string} Name of the message
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj.to</span>
      <span>{string|string[]} Recipient(s) of the message
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj.parent</span>
      <span>{string} <em>Parent</em> of the recipient(s) of the message
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>

</span>
      <span>{</em>}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">send</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">send</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Invalid arguments to send&#39;</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_addCachedMessage</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">toArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">));</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="popupwindow">popupWindow</h4>
<p>Open a window by name
Has the ability to force a window to focus</p>

  </div>
  <div class="body"><p>Will open the window with the properties passed in such as width, height, left, top etc.
Defaults to the saved properties of the window with the same &#39;name&#39; as provided.</p>

  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.name</span>
      <span>{string} Name of the WindowManager instance
that exists on the page with the same &#39;location&#39; as provided
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.focus</span>
      <span>{boolean} Whether or not to focus the window if already open
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">forceToForeground</span>
      <span>{boolean} Whether to force the window
into focus
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>

</span>
      <span>{</em>}
</span>
    </div>
  </div>
</div>
<div class="dox">
  <div class="summary"><h5 id="example-usage-of-popupwindow">Example usage of popupWindow</h5>

<div class="highlight"><pre><code><span class="nx">app</span><span class="p">.</span><span class="nx">windowManager</span><span class="p">.</span><span class="nx">popupWindow</span><span class="p">({</span>
<span class="nx">location</span><span class="o">:</span> <span class="nx">path</span><span class="p">,</span>
<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;notificationPopup&#39;</span><span class="p">,</span>
<span class="nx">width</span><span class="o">:</span> <span class="mi">320</span><span class="p">,</span>
<span class="nx">height</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="nx">resizeable</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="nx">left</span><span class="o">:</span><span class="nx">left</span><span class="p">,</span>
<span class="nx">top</span><span class="o">:</span><span class="nx">top</span><span class="p">,</span>
<span class="nx">focus</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span>
</code></pre></div>



  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">popupWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">forceToForeground</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">popupCallback</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">callback</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">focus</span> <span class="o">=</span> <span class="nx">forceToForeground</span> <span class="o">||</span> <span class="nx">options</span><span class="p">.</span><span class="nx">focus</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">retWin</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;poppingUpWindow&#39;</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">cachedWin</span> <span class="o">=</span> <span class="nx">_this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
            <span class="nx">parent</span><span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">parent</span>
        <span class="p">});</span>
        <span class="kd">var</span> <span class="nx">win</span> <span class="o">=</span> <span class="nx">extend</span><span class="p">({},</span> <span class="nx">cachedWin</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">cachedWin</span> <span class="o">&amp;&amp;</span> <span class="nx">cachedWin</span><span class="p">.</span><span class="nx">isOpen</span> <span class="o">&amp;&amp;</span> <span class="nx">focus</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">retWin</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">focusWindow</span><span class="p">(</span><span class="nx">win</span><span class="p">,</span> <span class="nx">popupCallback</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">retWin</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">openWindow</span><span class="p">(</span><span class="nx">win</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">popupCallback</span><span class="p">)</span> <span class="nx">popupCallback</span><span class="p">(</span><span class="nx">retWin</span><span class="p">,</span> <span class="nx">win</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">retWin</span><span class="p">;</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="focuswindow">focusWindow</h4>
<p>Function to bring a window that is already open
to the foreground. Does this by either using a
windows focus method if a reference to the
window is available or reopening it if not.</p>

  </div>
  <div class="body"><p>Fires a focusedWindow event when done.</p>

  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.name</span>
      <span>{string} Name of the window to focus
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.parent</span>
      <span>{string} (Optional) Parent of the window to focus.
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.windowName</span>
      <span>{string} (Optional) Name of &#39;window&#39; to restrict focus to
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.redirectUrl</span>
      <span>{boolean} (Optional) Whether to redirect url if window is already open. Defaults to false.
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.reopenAllChildren</span>
      <span>{boolean} (Optional) Whether to open all children of the window. Defaults to true.
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options.noUserAction</span>
      <span>{boolean} (Optional) If this is set to true, the window will always be opened using a new
window. This is due to a browser limitation that prevents focusing an already opened window if there is no user action
in the call stack.
Only needs to be specified if different from current instances parent.
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">callback
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>

</span>
      <span>{</em>}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">focusWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">parent</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">windowName</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">windowName</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">reopenAllChildren</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">reopenAllChildren</span><span class="p">;</span> <span class="c1">// Option to relaunch all children on focus</span>
        <span class="kd">var</span> <span class="nx">userActionMissing</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">noUserAction</span><span class="p">;</span> <span class="c1">// Signal whether a user action is missing in the call stack</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32">&#182;</a>
</div>
<p>If this is the target window itself, make it reopen itself</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">name</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">==</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">makeWindowOpenSilent</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">makeWindowCloseSilent</span><span class="p">();</span>
            <span class="nx">options</span><span class="p">.</span><span class="nx">forceNew</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">win</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">openWindow</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">win</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
            <span class="nb">window</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
            <span class="k">return</span> <span class="nx">win</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">cachedWindow</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33">&#182;</a>
</div>
<p>If the window is not open return;</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">cachedWindow</span> <span class="o">||</span> <span class="o">!</span><span class="nx">cachedWindow</span><span class="p">.</span><span class="nx">isOpen</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34">&#182;</a>
</div>
<p>If the window is being opened return;</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">beingOpened</span><span class="p">[</span><span class="nx">parent</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">])</span> <span class="k">return</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35">&#182;</a>
</div>
<p>If we have access to the current window in our array of window refs just focus it</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">focusedWin</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">windowRefObj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getWindowRefObj</span><span class="p">(</span><span class="nx">windowName</span> <span class="o">||</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">windowRefObj</span><span class="p">)</span> <span class="nx">focusedWin</span> <span class="o">=</span> <span class="nx">windowRefObj</span><span class="p">.</span><span class="nx">popup</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">focusedWin</span> <span class="o">&amp;&amp;</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">hasNativeWindowFocus</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">isValidWindow</span><span class="p">(</span><span class="nx">focusedWin</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">userActionMissing</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">focusedWin</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">notify</span><span class="p">(</span><span class="s1">&#39;focusedWindow&#39;</span><span class="p">);</span>
            <span class="k">try</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36">&#182;</a>
</div>
<p>Set the location of the window to the new location if they are different</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">redirectUrl</span> <span class="o">&amp;&amp;</span> <span class="nx">options</span><span class="p">.</span><span class="nx">location</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">focusedWin</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">!=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">location</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">_this</span><span class="p">.</span><span class="nx">_unsetPopupUnloadHandler</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
                    <span class="nx">focusedWin</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">location</span><span class="p">;</span>
                    <span class="nx">_this</span><span class="p">.</span><span class="nx">_setPopupUnloadHandler</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">parent</span><span class="p">,</span> <span class="nx">focusedWin</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">focusedWin</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">focusedWin</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37">&#182;</a>
</div>
<p>Otherwise ping the window to see if it responds</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="kd">var</span> <span class="nx">pingWindowCallback</span> <span class="o">=</span> <span class="nx">bind</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38">&#182;</a>
</div>
<p>If the window response,
send it a message telling it to close itself.</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
                        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;closeWindow&#39;</span><span class="p">,</span>
                        <span class="nx">to</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span>
                        <span class="nx">parent</span><span class="o">:</span> <span class="nx">parent</span>
                    <span class="p">},</span> <span class="p">{</span>
                        <span class="nx">silent</span><span class="o">:</span> <span class="o">!</span><span class="nx">reopenAllChildren</span>
                    <span class="p">});</span>
                    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">reopenAllChildren</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">makeWindowOpenSilent</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
                    <span class="nx">delay</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">win</span> <span class="o">=</span> <span class="nx">_this</span><span class="p">.</span><span class="nx">openWindow</span><span class="p">({</span>
                            <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span>
                            <span class="nx">parent</span><span class="o">:</span> <span class="nx">parent</span><span class="p">,</span>
                            <span class="nx">location</span><span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">location</span>
                        <span class="p">});</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">win</span><span class="p">);</span>
                    <span class="p">},</span> <span class="mi">200</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39">&#182;</a>
</div>
<p>Otherwise just open it</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">_this</span><span class="p">.</span><span class="nx">openWindow</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">},</span> <span class="k">this</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">pingWindow</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="o">:</span> <span class="nx">parent</span> <span class="p">},</span> <span class="nx">pingWindowCallback</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="openwindow">openWindow</h4>

  </div>
  <div class="body"><p>This is a largely internal method for opening
windows. As opposed to popupWindow it does not
support refocusing already opened windows.</p>
<p>Will override the window properties with properties
passed in but will default to saved properties of the
window saved in cache by the same &#39;name&#39;.
Also stores a reference to the window for use by the
window manager.</p>
<p>Takes a forceNew option that will make sure of a unique
windowName for a window to make sure the page is not
opened on a window that already exists.</p>
<p>Fires a poppedUpWindow pr popupBlocked event when done.</p>

  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Window

</span>
      <span>{Window}
</span>
    </div>
  </div>
</div>
<div class="dox">
  <div class="summary"><h5 id="example-usage-of-openwindow">Example usage of openWindow</h5>

<div class="highlight"><pre><code><span class="kd">var</span> <span class="nx">win</span> <span class="o">=</span> <span class="nx">_this</span><span class="p">.</span><span class="nx">openWindow</span><span class="p">({</span>
<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span>
<span class="nx">parent</span><span class="o">:</span> <span class="s1">&#39;parent&#39;</span>
<span class="p">});</span>
</code></pre></div>



  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">openWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">parent</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">cachedWin</span> <span class="o">=</span> <span class="nx">_this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span>
            <span class="nx">parent</span><span class="o">:</span> <span class="nx">parent</span>
        <span class="p">});</span>
        <span class="kd">var</span> <span class="nx">win</span> <span class="o">=</span> <span class="nx">extend</span><span class="p">({},</span> <span class="nx">cachedWin</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">windowName</span> <span class="o">=</span> <span class="nb">encodeURI</span><span class="p">(</span><span class="nx">win</span><span class="p">.</span><span class="nx">windowName</span> <span class="o">||</span> <span class="nx">name</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">win</span><span class="p">.</span><span class="nx">location</span><span class="p">)</span> <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;openWindow needs a location&quot;</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41">&#182;</a>
</div>
<p>Option to force opening a new window in case passed in name is same as a windowName that already exists</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">forceNew</span><span class="p">)</span> <span class="nx">windowName</span>  <span class="o">=</span> <span class="nx">windowName</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">adjustedDimensions</span> <span class="o">=</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">getAdjustedWindowDimensions</span><span class="p">({</span>
            <span class="nx">width</span><span class="o">:</span> <span class="nx">win</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
            <span class="nx">height</span><span class="o">:</span> <span class="nx">win</span><span class="p">.</span><span class="nx">height</span>
        <span class="p">});</span>
        <span class="kd">var</span> <span class="nx">winAttrObj</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">width</span><span class="o">:</span> <span class="nx">adjustedDimensions</span><span class="p">.</span><span class="nx">width</span> <span class="o">||</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">defaultPopupHeight</span><span class="p">,</span>
            <span class="nx">height</span><span class="o">:</span> <span class="nx">adjustedDimensions</span><span class="p">.</span><span class="nx">height</span> <span class="o">||</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">defaultPopupWidth</span><span class="p">,</span>
            <span class="nx">resizable</span><span class="o">:</span> <span class="nx">win</span><span class="p">.</span><span class="nx">resizable</span><span class="p">,</span>
            <span class="nx">left</span><span class="o">:</span> <span class="nx">win</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span>
            <span class="nx">top</span><span class="o">:</span> <span class="nx">win</span><span class="p">.</span><span class="nx">top</span>
        <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">windowAttrs</span> <span class="o">=</span> <span class="nx">_reduce</span><span class="p">(</span><span class="nx">winAttrObj</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">result</span> <span class="o">!==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="nx">result</span> <span class="o">+=</span> <span class="s1">&#39;,&#39;</span><span class="p">;</span>
            <span class="nx">result</span> <span class="o">+=</span> <span class="nx">key</span> <span class="o">+</span> <span class="s1">&#39;=&#39;</span> <span class="o">+</span> <span class="nx">val</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
        <span class="p">},</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">popup</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">win</span><span class="p">.</span><span class="nx">location</span><span class="p">,</span> <span class="nx">windowName</span><span class="p">,</span> <span class="nx">windowAttrs</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42">&#182;</a>
</div>
<p>If a window already exists with the same location and windowName focus it</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="nx">popup</span> <span class="o">&amp;&amp;</span> <span class="nx">popup</span><span class="p">.</span><span class="nx">focus</span><span class="p">)</span> <span class="nx">popup</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43">&#182;</a>
</div>
<p>Set the the window being opened to true</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">beingOpened</span><span class="p">[</span><span class="nx">parent</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Defer because of a bug in browsers where return window object is not populated immediately</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">delay</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45">&#182;</a>
</div>
<p>Set the the window being opened to false</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">delete</span> <span class="nx">_this</span><span class="p">.</span><span class="nx">beingOpened</span><span class="p">[</span><span class="nx">parent</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">];</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46">&#182;</a>
</div>
<p>If the window is not valid notify</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">popup</span> <span class="o">||</span> <span class="o">!</span><span class="nx">Config</span><span class="p">.</span><span class="nx">isValidWindow</span><span class="p">(</span><span class="nx">popup</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">_this</span><span class="p">.</span><span class="nx">notify</span><span class="p">(</span><span class="s1">&#39;popupBlocked&#39;</span><span class="p">,</span> <span class="nx">win</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47">&#182;</a>
</div>
<p>Otherwise store the reference and notify</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">_this</span><span class="p">.</span><span class="nx">notify</span><span class="p">(</span><span class="s1">&#39;poppedUpWindow&#39;</span><span class="p">,</span> <span class="nx">win</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">windowRefObj</span> <span class="o">=</span> <span class="nx">_this</span><span class="p">.</span><span class="nx">_addWindowRefObj</span><span class="p">(</span><span class="nx">windowName</span> <span class="o">||</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">popup</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48">&#182;</a>
</div>
<p>Clear the window reference on unload</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">_this</span><span class="p">.</span><span class="nx">_setPopupUnloadHandler</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">popup</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">popupDelay</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">popup</span><span class="p">;</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="closewindow">closeWindow</h4>
<p>Close a window by name and optional parent
Defaults to this parent</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent

</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">closeWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span> <span class="o">?</span> <span class="nx">name</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="o">:</span> <span class="nx">parent</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;closeWindow&quot;</span><span class="p">,</span>
            <span class="nx">to</span><span class="o">:</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
            <span class="nx">parent</span><span class="o">:</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span>
        <span class="p">});</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="getproperty">getProperty</h4>
<p>Get a property of a window. These are persisted in memory.</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">key</span>
      <span>Key to get
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span>Name of the window
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>

</span>
      <span>{</em>}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">getProperty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">cachedObj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">(</span><span class="nx">name</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">cachedObj</span> <span class="o">&amp;&amp;</span> <span class="nx">cachedObj</span><span class="p">.</span><span class="nx">props</span><span class="p">)</span> <span class="o">?</span> <span class="nx">cachedObj</span><span class="p">.</span><span class="nx">props</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="getproperties">getProperties</h4>
<p>Get all properties of a window. These are persisted in memory.</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span>Name of the window
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent</span>
      <span>Name of parent the window
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>

</span>
      <span>{</em>}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">getProperties</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">cachedObj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">(</span><span class="nx">name</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">cachedObj</span><span class="p">)</span> <span class="o">?</span> <span class="nx">cachedObj</span><span class="p">.</span><span class="nx">props</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="setproperty">setProperty</h4>
<p>Set a property of a window. These are persisted in memory.</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">key</span>
      <span>Key to set
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">val</span>
      <span>Value to set
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span>Name of the window
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent</span>
      <span>Name of the parent window
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">setProperty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">cachedObj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">(</span><span class="nx">name</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">cachedObj</span> <span class="o">&amp;&amp;</span> <span class="nx">cachedObj</span><span class="p">.</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">cachedObj</span><span class="p">.</span><span class="nx">props</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="deleteproperty">deleteProperty</h4>
<p>Delete a persisted property of a window</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">key</span>
      <span>Key to set
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span>Name of the window
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent</span>
      <span>Name of the parent window
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">deleteProperty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">cachedObj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">(</span><span class="nx">name</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">cachedObj</span> <span class="o">&amp;&amp;</span> <span class="nx">cachedObj</span><span class="p">.</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">delete</span> <span class="nx">cachedObj</span><span class="p">.</span><span class="nx">props</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="setproperties">setProperties</h4>
<p>Set all properties of a window. These are persisted in memory.</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">val</span>
      <span>Value to set
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span>Name of the window
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent</span>
      <span>Name of the parent window
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">setProperties</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">cachedObj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">(</span><span class="nx">name</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">cachedObj</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">cachedObj</span><span class="p">.</span><span class="nx">props</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="getallwindows">getAllWindows</h4>
<p>Get an object representation for all windows in a given parent</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent</span>
      <span>Name of parent
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>

</span>
      <span>{</em>}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">getAllWindows</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">cloneDeep</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindowParent</span><span class="p">(</span><span class="nx">parent</span><span class="p">));</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="getwindow">getWindow</h4>
<p>Get the object representation of a window</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span>Name of window
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent</span>
      <span>Name of parent
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>

</span>
      <span>{</em>}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">getWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">cloneDeep</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">));</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="getcurrentwindow">getCurrentWindow</h4>
<p>Get the object representation of the current window</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>

</span>
      <span>{</em>}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">getCurrentWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">cloneDeep</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_getCurrentCachedWindow</span><span class="p">());</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="clearmemory">clearMemory</h4>
<p>Clear the memory</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">clearMemory</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">namespace</span><span class="p">);</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="clearmessagesforparent">clearMessagesForParent</h4>
<p>Clear messages for a parent</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent

</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">clearAllMessagesForParent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_clearCachedMessages</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="checkmessages">checkMessages</h4>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">checkMessages</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61">&#182;</a>
</div>
<p>Force the window to check current message queue</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">_checkMessages</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="updatememory">updateMemory</h4>
<p>Update the memory</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">updateMemory</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_updateCachedUID</span><span class="p">();</span>
        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">));</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63">&#182;</a>
</div>
<p>Need to use a setBit to cause localStorage updates on some browsers
Because some browsers don&#39;t recognize changes if the string is too long</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">+</span> <span class="s1">&#39;setBit&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">().</span><span class="nx">toString</span><span class="p">());</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="refreshcache">refreshCache</h4>
<p>Refresh the cached object from memory</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">refreshCache</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">cachedDefault</span>  <span class="o">=</span> <span class="p">{</span>
            <span class="nx">windows</span> <span class="o">:</span> <span class="p">{},</span>
            <span class="nx">msgs</span><span class="o">:</span> <span class="p">{},</span>
            <span class="nx">uid</span><span class="o">:</span> <span class="mi">0</span>
        <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">currentCacheString</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">namespace</span><span class="p">)</span> <span class="p">;</span>
        <span class="kd">var</span> <span class="nx">currentCache</span><span class="p">;</span>
        <span class="k">try</span><span class="p">{</span>
            <span class="nx">currentCache</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">currentCacheString</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">cached</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nx">currentCache</span><span class="p">)</span> <span class="o">?</span> <span class="nx">cachedDefault</span> <span class="o">:</span> <span class="nx">extend</span><span class="p">(</span><span class="nx">cachedDefault</span><span class="p">,</span> <span class="nx">currentCache</span><span class="p">);</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Send a ping to see if a window responds</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">cb

</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">pingWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">pingDfd</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;pingWindowRequest&#39;</span><span class="p">,</span>
            <span class="nx">to</span><span class="o">:</span>  <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
            <span class="nx">parent</span><span class="o">:</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span>
        <span class="p">});</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">pingDfd</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">flag</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">cb</span><span class="p">(</span><span class="nx">flag</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="nx">delay</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">_this</span><span class="p">.</span><span class="nx">pingDfd</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="kc">false</span><span class="p">]);</span>
        <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="makewindowclosesilent">makeWindowCloseSilent</h4>
<p>Calling this function will not delete it from memory
on the next close</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">makeWindowCloseSilent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">closeSilent</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="makewindowopensilent">makeWindowOpenSilent</h4>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent

</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">makeWindowOpenSilent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">Config</span><span class="p">.</span><span class="nx">hasSelfTriggerError</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
            <span class="kd">var</span> <span class="nx">cachedWin</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">({</span>
                <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
                <span class="nx">parent</span><span class="o">:</span> <span class="nx">parent</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span>
            <span class="p">});</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">cachedWin</span><span class="p">.</span><span class="nx">type</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">cachedWin</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;master&quot;</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
            <span class="nx">cachedWin</span><span class="p">.</span><span class="nx">silentReopen</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="setcurrentwindow">setCurrentWindow</h4>
<p>Sets the properties of the current window in memory</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">setCurrentWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_registerWindow</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
            <span class="nx">parent</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">,</span>
            <span class="nx">type</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span>
        <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="notify">notify</h4>
<p>Trigger an event on the current instance</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span>Name of the event
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">arg1</span>
      <span>Additional argument to passed along
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">arg2</span>
      <span>Additional argument to passed along
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">notify</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">)));</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h3 id="position-and-animation">Position and Animation</h3>

  </div>
  <div class="body">
  </div>
</div>
<div class="dox">
  <div class="summary"><h4 id="animatewindow">animateWindow</h4>
<p>animateWindow takes a window instance, some options and a callback and animates the given window to the
height and width provided</p>

  </div>
  <div class="body"><p>win {window} window to be animated
options {object}
options.innerHeight innerHeight to animate the window to
options.innerWidth innerWidth to animate the window to
options.anchorBottom
options.anchorRight</p>

  </div>
  <div class="details">
    <div class="dox_tag_title">Type</div>
    <div class="dox_tag_detail">
      <span class="dox_type">*

</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">animateWindow</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">isAnimating</span><span class="p">,</span>
            <span class="nx">maxHeight</span><span class="p">,</span>
            <span class="nx">maxWidth</span><span class="p">,</span>
            <span class="nx">chromeHeight</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Config</span><span class="p">.</span><span class="nx">isMac</span><span class="p">)</span> <span class="o">?</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">macChromeHeight</span> <span class="o">:</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">winChromeHeight</span><span class="p">,</span>
            <span class="nx">minHeight</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Config</span><span class="p">.</span><span class="nx">isMac</span><span class="p">)</span> <span class="o">?</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">macMinWindowHeight</span> <span class="o">:</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">winMinWindowHeight</span><span class="p">,</span>
            <span class="nx">minWidth</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Config</span><span class="p">.</span><span class="nx">isMac</span><span class="p">)</span> <span class="o">?</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">macMinWindowWidth</span> <span class="o">:</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">winMinWindowWidth</span><span class="p">;</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">win</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">isAnimating</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
            <span class="nx">isAnimating</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71">&#182;</a>
</div>
<p>Can pass an innerHeight which is the target height of the document within the window. wm will calculate what the actual height should be</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="kd">var</span> <span class="nx">passedHeight</span> <span class="o">=</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">)</span> <span class="o">?</span> <span class="nx">chromeHeight</span> <span class="o">+</span> <span class="nx">options</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72">&#182;</a>
</div>
<p>Target height for the window</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">maxHeight</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">passedHeight</span> <span class="o">!=</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">passedHeight</span> <span class="o">:</span> <span class="mi">153</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73">&#182;</a>
</div>
<p>Make sure the target height is at least the minimum allowed by the browser</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">maxHeight</span> <span class="o">=</span> <span class="nx">_max</span><span class="p">([</span><span class="nx">minHeight</span><span class="p">,</span> <span class="nx">maxHeight</span><span class="p">]);</span>
            <span class="nx">maxWidth</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">width</span> <span class="o">!=</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">options</span><span class="p">.</span><span class="nx">width</span> <span class="o">:</span> <span class="mi">310</span><span class="p">;</span>
            <span class="nx">maxWidth</span> <span class="o">=</span> <span class="nx">_max</span><span class="p">([</span><span class="nx">minWidth</span><span class="p">,</span> <span class="nx">maxWidth</span><span class="p">]);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74">&#182;</a>
</div>
<p>Positive for increase, negative for decrease</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="kd">var</span> <span class="nx">yDir</span> <span class="o">=</span> <span class="nx">maxHeight</span> <span class="o">&gt;=</span> <span class="nx">win</span><span class="p">.</span><span class="nx">outerHeight</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75">&#182;</a>
</div>
<p>Positive for increase, negative for decrease</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">xDir</span> <span class="o">=</span> <span class="nx">maxWidth</span> <span class="o">&gt;=</span> <span class="nx">win</span><span class="p">.</span><span class="nx">outerWidth</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                <span class="nx">xConstraint</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">xConstraint</span> <span class="o">||</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">availWidth</span><span class="p">,</span>
                <span class="nx">yConstraint</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">yConstraint</span> <span class="o">||</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">availHeight</span><span class="p">,</span>
                <span class="nx">anchorBottom</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">anchorBottom</span><span class="p">,</span>
                <span class="nx">anchorRight</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">anchorRight</span><span class="p">,</span>
                <span class="nx">left</span><span class="p">,</span>
                <span class="nx">top</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76">&#182;</a>
</div>
<p>Minimum increment</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">minInc</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">increment</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">animateWin</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">winHeight</span> <span class="o">=</span> <span class="nx">win</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">,</span>
                    <span class="nx">winWidth</span> <span class="o">=</span> <span class="nx">win</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-77" id="section-77">&#182;</a>
</div>
<p>Calculate the new window dimensions for this cycle</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="kd">var</span> <span class="nx">incHeight</span> <span class="o">=</span> <span class="p">(</span><span class="nx">win</span><span class="p">.</span><span class="nx">outerHeight</span> <span class="o">-</span> <span class="nx">maxHeight</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">win</span><span class="p">.</span><span class="nx">outerHeight</span> <span class="o">-</span> <span class="nx">maxHeight</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">minInc</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nx">winHeight</span><span class="o">+=</span> <span class="nx">yDir</span> <span class="o">*</span> <span class="nx">incHeight</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">incWidth</span> <span class="o">=</span> <span class="p">(</span><span class="nx">win</span><span class="p">.</span><span class="nx">outerWidth</span> <span class="o">-</span> <span class="nx">maxWidth</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">win</span><span class="p">.</span><span class="nx">outerWidth</span> <span class="o">-</span> <span class="nx">maxWidth</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">minInc</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nx">winWidth</span><span class="o">+=</span> <span class="nx">xDir</span> <span class="o">*</span> <span class="nx">incWidth</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">yMax</span> <span class="o">=</span> <span class="p">(</span><span class="nx">yDir</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">_min</span> <span class="o">:</span> <span class="nx">_max</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">yLimit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">yDir</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">maxHeight</span><span class="o">:</span> <span class="nx">minHeight</span><span class="p">;</span>
                <span class="nx">winHeight</span> <span class="o">=</span> <span class="nx">yMax</span><span class="p">([</span><span class="nx">winHeight</span><span class="p">,</span> <span class="nx">yLimit</span><span class="p">]);</span>
                <span class="kd">var</span> <span class="nx">xMax</span> <span class="o">=</span> <span class="p">(</span><span class="nx">xDir</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">_min</span> <span class="o">:</span> <span class="nx">_max</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">xLimit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">xDir</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">maxWidth</span><span class="o">:</span> <span class="nx">minWidth</span><span class="p">;</span>
                <span class="nx">winWidth</span> <span class="o">=</span> <span class="nx">xMax</span><span class="p">([</span><span class="nx">winWidth</span><span class="p">,</span> <span class="nx">xLimit</span><span class="p">]);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78">&#182;</a>
</div>
<p>Calculate the new window positions for this cycle</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">top</span> <span class="o">=</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">top</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="o">?</span> <span class="nx">options</span><span class="p">.</span><span class="nx">top</span> <span class="o">:</span> <span class="nx">win</span><span class="p">.</span><span class="nx">screenY</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">anchorBottom</span><span class="p">)</span> <span class="nx">top</span> <span class="o">=</span> <span class="nx">anchorBottom</span> <span class="o">-</span> <span class="nx">winHeight</span><span class="p">;</span>
                <span class="k">if</span><span class="p">((</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">winHeight</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">yConstraint</span><span class="p">)</span> <span class="nx">top</span> <span class="o">=</span> <span class="nx">yConstraint</span> <span class="o">-</span> <span class="nx">winHeight</span><span class="p">;</span>
                <span class="nx">left</span> <span class="o">=</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">left</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="o">?</span> <span class="nx">options</span><span class="p">.</span><span class="nx">left</span> <span class="o">:</span> <span class="nx">win</span><span class="p">.</span><span class="nx">screenX</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">anchorRight</span><span class="p">)</span> <span class="nx">left</span> <span class="o">=</span> <span class="nx">anchorRight</span> <span class="o">-</span> <span class="nx">winWidth</span><span class="p">;</span>
                <span class="k">if</span><span class="p">((</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">winWidth</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">xConstraint</span><span class="p">)</span> <span class="nx">left</span> <span class="o">=</span> <span class="nx">xConstraint</span> <span class="o">-</span> <span class="nx">winWidth</span><span class="p">;</span>

                <span class="nx">win</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span> <span class="nx">top</span><span class="p">);</span>
                <span class="nx">win</span><span class="p">.</span><span class="nx">resizeTo</span><span class="p">(</span><span class="nx">winWidth</span><span class="p">,</span> <span class="nx">winHeight</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79">&#182;</a>
</div>
<p>Calculate whether or not to run another cycle</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">if</span><span class="p">(</span><span class="nx">winHeight</span> <span class="o">!=</span> <span class="nx">maxHeight</span> <span class="o">||</span> <span class="nx">winWidth</span> <span class="o">!=</span> <span class="nx">maxWidth</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">animateWin</span><span class="p">();</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">isAnimating</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="nx">callback</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">};</span>
            <span class="nx">animateWin</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">})();</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="movewindowby">moveWindowBy</h4>
<p>Move a window by an x and y value</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">win
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">xDiff
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">yDiff

</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">moveWindowBy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">win</span><span class="p">,</span> <span class="nx">xDiff</span><span class="p">,</span> <span class="nx">yDiff</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">win</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">rightEdge</span> <span class="o">=</span> <span class="nx">win</span><span class="p">.</span><span class="nx">screenX</span> <span class="o">+</span> <span class="nx">xDiff</span> <span class="o">+</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">outerWidth</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">bottomEdge</span> <span class="o">=</span> <span class="nx">win</span><span class="p">.</span><span class="nx">screenY</span> <span class="o">+</span> <span class="nx">yDiff</span> <span class="o">+</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">outerHeight</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">resizeWidth</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">availWidth</span> <span class="o">-</span> <span class="nx">rightEdge</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">resizeHeight</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">availHeight</span> <span class="o">-</span> <span class="nx">bottomEdge</span><span class="p">);</span>
        <span class="nx">win</span><span class="p">.</span><span class="nx">resizeBy</span><span class="p">(</span><span class="nx">resizeWidth</span><span class="p">,</span> <span class="nx">resizeHeight</span><span class="p">);</span>
        <span class="nx">win</span><span class="p">.</span><span class="nx">moveBy</span><span class="p">(</span><span class="nx">xDiff</span><span class="p">,</span> <span class="nx">yDiff</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h3 id="master-windows-only">MASTER WINDOWS ONLY</h3>
<p><em>Methods specific to &#39;master&#39; windows</em></p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h4 id="closeallchildren">closeAllChildren</h4>
<p>Close all children of a parent
Defaults to current parent
options.silent to close windows
`` without removing the window from memory</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">closeAllChildren</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="kd">var</span> <span class="nx">parentName</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">silent</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
                <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;closeSilent&#39;</span><span class="p">,</span>
                <span class="nx">parent</span><span class="o">:</span> <span class="nx">parentName</span>
            <span class="p">});</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
                <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;closeWindow&#39;</span><span class="p">,</span>
                <span class="nx">parent</span><span class="o">:</span> <span class="nx">parentName</span>
            <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>openAllChildren</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Array

</span>
      <span>{Array}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">openAllChildren</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="kd">var</span> <span class="nx">parentName</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">wins</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getAllWindows</span><span class="p">(</span><span class="nx">parentName</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">win</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">win</span><span class="p">.</span><span class="nx">type</span> <span class="o">!=</span> <span class="s2">&quot;master&quot;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">wins</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">openWindow</span><span class="p">({</span>
                    <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span>
                    <span class="nx">parent</span><span class="o">:</span> <span class="nx">parentName</span>
                <span class="p">}));</span>
            <span class="p">}</span>
        <span class="p">},</span> <span class="k">this</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">wins</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-84" id="section-84">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h2 id="internal-methods">INTERNAL METHODS</h2>

  </div>
  <div class="body">
  </div>
</div>
<div class="dox">
  <div class="summary"><p>Update the UID</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_updateCachedUID</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">.</span><span class="nx">uid</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">().</span><span class="nx">toString</span><span class="p">().</span><span class="nx">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-85" id="section-85">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Get the UID</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">number

</span>
      <span>{number}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_getCachedUID</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">.</span><span class="nx">uid</span><span class="p">;</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-86" id="section-86">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Get messages for window</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>

</span>
      <span>{</em>}
</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_getMessages</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">cachedMsgParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedMessageParent</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">cachedMsgParent</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">cachedMsgParent</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-87" id="section-87">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Remove a message</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">msg

</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_removeMsgFromMessages</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_removeCachedMessage</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-88" id="section-88">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Force the window manager to check its messages</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_checkMessages</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">msgs</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getMessages</span><span class="p">(</span><span class="nx">name</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
        <span class="nx">each</span><span class="p">(</span><span class="nx">msgs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">eventObj</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">from</span><span class="o">:</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span>
                <span class="nx">to</span><span class="o">:</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span>
                <span class="nx">parent</span><span class="o">:</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">parent</span><span class="p">,</span>
                <span class="nx">fromParent</span><span class="o">:</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">fromParent</span>
            <span class="p">};</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_removeMsgFromMessages</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">eventObj</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">args</span><span class="p">));</span>
        <span class="p">},</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-89" id="section-89">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Remove a window from memory</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name

</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_removeWindowFromWindows</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_removeCachedWindow</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;external&quot;</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;windowRemoved&quot;</span><span class="p">,</span>
            <span class="nx">to</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span>
        <span class="p">},</span> <span class="nx">name</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;windowRemoved:&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">,</span>
            <span class="nx">to</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span>
        <span class="p">},</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">(</span><span class="nx">name</span><span class="p">));</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-90" id="section-90">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Takes an object that accepts -
name:String the name of the this window
type:String (Optional) either &#39;master&#39;,&#39;sub&#39; or &#39;external&#39;.
<code>If left blank defaults to &#39;master&#39; in case parent is not specified</code> If parent is specified type is automatically changed to sub
parent:String (Optional for non sub types) the parent name of its parent.</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">force

</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_registerWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">force</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-91" id="section-91">&#182;</a>
</div>
<p>Setup cache object</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">refreshCache</span><span class="p">();</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-92" id="section-92">&#182;</a>
</div>
<p>Setup current window</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;master&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;master&quot;</span> <span class="o">:</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="o">?</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">type</span> <span class="o">:</span> <span class="s2">&quot;sub&quot;</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">sticky</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;external&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;external&quot;</span> <span class="o">:</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;master&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span> <span class="o">:</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;sub&quot;</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;Missing parent window name for type sub&quot;</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-93" id="section-93">&#182;</a>
</div>
<p>Some browsers change window.outerHeight to be some small number when the window is minimized.
window.innerHeight, however remains the real value.
We check to make sure that window.outerHeight &gt; window.innerHeight, and if not, we assume
the outerHeight is invalid and don&#39;t cache the window</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">Config</span><span class="p">.</span><span class="nx">isValidWindow</span><span class="p">(</span><span class="nb">window</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">cachedWin</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span>
            <span class="nx">parent</span><span class="o">:</span> <span class="nx">parent</span>
        <span class="p">});</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">cachedWin</span> <span class="o">||</span> <span class="nx">force</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">winVal</span> <span class="o">=</span> <span class="nx">extend</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span>
                    <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;sub&quot;</span><span class="p">,</span>
                    <span class="nx">props</span> <span class="o">:</span> <span class="p">{}</span>
                <span class="p">},</span>
                <span class="p">(</span><span class="nx">cachedWin</span> <span class="o">||</span> <span class="p">{}),</span>
                <span class="p">{</span>
                    <span class="nx">windowName</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
                    <span class="nx">title</span><span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
                    <span class="nx">type</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
                    <span class="nx">location</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
                    <span class="nx">width</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span>
                    <span class="nx">height</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">,</span>
                    <span class="nx">left</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">screenX</span><span class="p">,</span>
                    <span class="nx">top</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">screenY</span><span class="p">,</span>
                    <span class="nx">isOpen</span><span class="o">:</span> <span class="kc">true</span>
                <span class="p">}</span>
            <span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_addCachedWindow</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">winVal</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;sub&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
                <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;windowAdded&quot;</span><span class="p">,</span>
                <span class="nx">to</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span>
            <span class="p">},</span> <span class="nx">name</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">(</span><span class="nx">name</span><span class="p">));</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
                <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;windowAdded:&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
                <span class="nx">to</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span>
            <span class="p">},</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">(</span><span class="nx">name</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-94" id="section-94">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Internal method for adding a message to message cache
Any additional arguments are passed on to as the second arguments of the message callback</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj.name</span>
      <span>{string} Name of the message
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj.to</span>
      <span>{string|string[]} Recipient(s) of the message
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj.parent</span>
      <span>{string} <em>Parent</em> of the recipient(s) of the message
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_addCachedMessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">recipients</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">to</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">msgName</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">to</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">recipients</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">recipients</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">recipients</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">))</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;Incorrect recipient type for windowManager send method&quot;</span><span class="p">);</span>
            <span class="nx">to</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">recipients</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="p">[</span><span class="nx">recipients</span><span class="p">]</span> <span class="o">:</span> <span class="nx">recipients</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">to</span> <span class="o">=</span> <span class="nx">_without</span><span class="p">(</span><span class="nx">_keys</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getAllWindows</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span><span class="p">)),</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_updateCachedUID</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">parent</span><span class="o">:</span> <span class="nx">parent</span>
        <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-95" id="section-95">&#182;</a>
</div>
<p>Add message only if recipients have been provided</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="nx">to</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_addCachedMessageParent</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">cachedParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedMessageParent</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
            <span class="nx">each</span><span class="p">(</span><span class="nx">to</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">recipientName</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">cachedParent</span><span class="p">[</span><span class="nx">recipientName</span><span class="p">])</span> <span class="nx">cachedParent</span><span class="p">[</span><span class="nx">recipientName</span><span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="kd">var</span> <span class="nx">msgUID</span> <span class="o">=</span> <span class="s2">&quot;msg&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedUID</span><span class="p">();</span>
                <span class="nx">cachedParent</span><span class="p">[</span><span class="nx">recipientName</span><span class="p">][</span><span class="nx">msgUID</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="nx">name</span><span class="o">:</span> <span class="nx">msgName</span><span class="p">,</span>
                    <span class="nx">ts</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
                    <span class="nx">uid</span><span class="o">:</span> <span class="nx">msgUID</span><span class="p">,</span>
                    <span class="nx">parent</span><span class="o">:</span> <span class="nx">parent</span><span class="p">,</span>
                    <span class="nx">to</span><span class="o">:</span> <span class="nx">recipientName</span><span class="p">,</span>
                    <span class="nx">from</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
                    <span class="nx">fromParent</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">,</span>
                    <span class="nx">args</span><span class="o">:</span> <span class="nx">args</span>
                <span class="p">};</span>
            <span class="p">},</span> <span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-96" id="section-96">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Removes the given message from the cache</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">msg
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_removeCachedMessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">cachedParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedMessageParent</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">parent</span><span class="p">);</span>
        <span class="k">delete</span> <span class="nx">cachedParent</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">to</span><span class="p">][</span><span class="nx">msg</span><span class="p">.</span><span class="nx">uid</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_keys</span><span class="p">(</span><span class="nx">cachedParent</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">to</span><span class="p">]).</span><span class="nx">length</span><span class="p">)</span> <span class="k">delete</span> <span class="nx">cachedParent</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">to</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_keys</span><span class="p">(</span><span class="nx">cachedParent</span><span class="p">))</span> <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">.</span><span class="nx">msgs</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">parent</span><span class="p">];</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-97" id="section-97">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Clears messages older than the Config.msgTimeout time</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_clearOldMessages</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">hasUpdate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">.</span><span class="nx">msgs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cachedMsgParent</span><span class="p">,</span> <span class="nx">parentKey</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">each</span><span class="p">(</span><span class="nx">cachedMsgParent</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cachedMsgWindow</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">each</span><span class="p">(</span><span class="nx">cachedMsgWindow</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">,</span> <span class="nx">msgName</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">ts</span> <span class="o">&gt;</span> <span class="nx">Config</span><span class="p">.</span><span class="nx">msgTimeout</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_removeCachedMessage</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
                        <span class="nx">hasUpdate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">},</span> <span class="k">this</span><span class="p">);</span>
            <span class="p">},</span> <span class="k">this</span><span class="p">);</span>
        <span class="p">},</span> <span class="k">this</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">hasUpdate</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-98" id="section-98">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Clears all the messages for a given window</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_clearCachedMessagesForWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span> <span class="o">?</span> <span class="nx">name</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span>  <span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="o">:</span> <span class="nx">parent</span> <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">cachedParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedMessageParent</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">cachedParent</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">delete</span> <span class="nx">cachedParent</span><span class="p">[</span><span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">];</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-99" id="section-99">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Clears all the messages for a given parent window</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parentName
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_clearCachedMessages</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">parentName</span><span class="p">))</span> <span class="o">?</span> <span class="nx">parentName</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">parent</span><span class="o">:</span> <span class="nx">parentName</span> <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">.</span><span class="nx">msgs</span><span class="p">[</span><span class="nx">parent</span><span class="p">];</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-100" id="section-100">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Gets the object representating messages for a given parent</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>
</span>
      <span>{</em>}
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_getCachedMessageParent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">obj</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">obj</span><span class="p">))</span> <span class="o">?</span> <span class="nx">obj</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">parent</span><span class="o">:</span> <span class="nx">obj</span> <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">.</span><span class="nx">msgs</span><span class="p">[</span><span class="nx">parent</span><span class="p">];</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-101" id="section-101">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Adds a cache for messages on a given parent</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parentName
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_addCachedMessageParent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">parentName</span><span class="p">))</span> <span class="o">?</span> <span class="nx">parentName</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">parent</span><span class="o">:</span> <span class="nx">parentName</span> <span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">.</span><span class="nx">msgs</span><span class="p">[</span><span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">.</span><span class="nx">msgs</span><span class="p">[</span><span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span><span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-102" id="section-102">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Adds a cache for windows on a given parent</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parentName
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_addCachedWindowParent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">parentName</span><span class="p">))</span> <span class="o">?</span> <span class="nx">parentName</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">parent</span><span class="o">:</span> <span class="nx">parentName</span> <span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">.</span><span class="nx">windows</span><span class="p">[</span><span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">.</span><span class="nx">windows</span><span class="p">[</span><span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span><span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-103" id="section-103">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Retrieves the cache for windows on a given parent</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parentName
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_getCachedWindowParent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">parentName</span><span class="p">))</span> <span class="o">?</span> <span class="nx">parentName</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">parent</span><span class="o">:</span> <span class="nx">parentName</span> <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">.</span><span class="nx">windows</span><span class="p">[</span><span class="nx">parent</span><span class="p">];</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-104" id="section-104">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Removes the cache for windows on a given parent</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parentName
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_removeCachedWindowParent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">parentName</span><span class="p">))</span> <span class="o">?</span> <span class="nx">parentName</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">parent</span><span class="o">:</span> <span class="nx">parentName</span> <span class="p">};</span>
        <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">cached</span><span class="p">.</span><span class="nx">windows</span><span class="p">[</span><span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span><span class="p">];</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-105" id="section-105">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Gets a given window from cache</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>
</span>
      <span>{</em>}
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_getCachedWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span> <span class="o">?</span> <span class="nx">name</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="o">:</span> <span class="nx">parent</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">cachedParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindowParent</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">cachedParent</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">win</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">cachedParent</span><span class="p">[</span><span class="nx">win</span><span class="p">];</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-106" id="section-106">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Gets the current window from cache</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>
</span>
      <span>{</em>}
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_getCurrentCachedWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span>
        <span class="p">});</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-107" id="section-107">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Removes a window from cache</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_removeCachedWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span> <span class="o">?</span> <span class="nx">name</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">cachedParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindowParent</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">parent</span><span class="p">);</span>
        <span class="k">delete</span> <span class="nx">cachedParent</span><span class="p">[</span><span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">];</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-108" id="section-108">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Adds a window to cache</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">val
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_addCachedWindow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span> <span class="o">?</span> <span class="nx">name</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parent</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_addCachedWindowParent</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">cachedParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindowParent</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
        <span class="nx">cachedParent</span><span class="p">[</span><span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-109" id="section-109">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Sets  a window to cache</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">val
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_setCachedWindow</span> <span class="o">=</span> <span class="nx">wm</span><span class="p">.</span><span class="nx">_addCachedWindow</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-110" id="section-110">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Adds a reference object for a window instance</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">windowName
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parentName
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">win
</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type"><em>
</span>
      <span>{</em>}
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_addWindowRefObj</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">parentName</span><span class="p">,</span> <span class="nx">win</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">windowRefParent</span> <span class="o">=</span> <span class="nx">parentName</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">windowRefs</span><span class="p">[</span><span class="nx">windowRefParent</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">windowRefs</span><span class="p">[</span><span class="nx">windowRefParent</span><span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">windowRefs</span><span class="p">[</span><span class="nx">windowRefParent</span><span class="p">][</span><span class="nx">windowName</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">windowRefs</span><span class="p">[</span><span class="nx">windowRefParent</span><span class="p">][</span><span class="nx">windowName</span><span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="kd">var</span> <span class="nx">windowRefObj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">windowRefs</span><span class="p">[</span><span class="nx">windowRefParent</span><span class="p">][</span><span class="nx">windowName</span><span class="p">];</span>
        <span class="nx">windowRefObj</span><span class="p">.</span><span class="nx">popup</span> <span class="o">=</span> <span class="nx">win</span><span class="p">;</span>
        <span class="nx">windowRefObj</span><span class="p">.</span><span class="nx">unloadCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">windowRefObj</span><span class="p">;</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-111" id="section-111">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Removes the reference object for a window instance</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">windowName
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parentName
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_removeWindowRefObj</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">parentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">windowRefParent</span> <span class="o">=</span> <span class="nx">parentName</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">windowRefs</span><span class="p">[</span><span class="nx">windowRefParent</span><span class="p">])</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">windowRefs</span><span class="p">[</span><span class="nx">windowRefParent</span><span class="p">][</span><span class="nx">windowName</span><span class="p">];</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-112" id="section-112">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Retrieves the reference object for a window instance</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">windowName
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parentName
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_getWindowRefObj</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">parentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">parentName</span> <span class="o">=</span> <span class="nx">parentName</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">windowRefs</span><span class="p">[</span><span class="nx">parentName</span><span class="p">]</span> <span class="o">&amp;&amp;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">windowRefs</span><span class="p">[</span><span class="nx">parentName</span><span class="p">][</span><span class="nx">windowName</span><span class="p">])</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">windowRefs</span><span class="p">[</span><span class="nx">parentName</span><span class="p">][</span><span class="nx">windowName</span><span class="p">];</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-113" id="section-113">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Removes the isOpen property from a cached window</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">windowName
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parentName
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_setWindowToClosed</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">parentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">cachedWin</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getCachedWindow</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span> <span class="nx">windowName</span><span class="p">,</span>
            <span class="nx">parent</span><span class="o">:</span> <span class="nx">parentName</span>
        <span class="p">});</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">cachedWin</span><span class="p">)</span> <span class="k">delete</span> <span class="nx">cachedWin</span><span class="p">.</span><span class="nx">isOpen</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_setCachedWindow</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">cachedWin</span><span class="p">);</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-114" id="section-114">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Sets the unload event removing the window reference from
cache when the window is closed</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">windowName
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parentName
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">win
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_setPopupUnloadHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">parentName</span><span class="p">,</span> <span class="nx">win</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">windowRefObj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getWindowRefObj</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">parentName</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">win</span><span class="p">).</span><span class="nx">unload</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">windowRefObj</span><span class="p">.</span><span class="nx">unloadCount</span><span class="o">++</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-115" id="section-115">&#182;</a>
</div>
<p>Special handled for possible bug</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span><span class="p">(</span><span class="nx">Config</span><span class="p">.</span><span class="nx">hasDoubleUnloadBug</span> <span class="o">&amp;&amp;</span> <span class="nx">windowRefObj</span><span class="p">.</span><span class="nx">unloadCount</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
            <span class="nx">_this</span><span class="p">.</span><span class="nx">_removeWindowRefObj</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">parentName</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-116" id="section-116">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Unsets the unload event for removing window reference from cache</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">windowName
</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parentName
</span>
    </div>
    <div class="dox_tag_title">private

</div>
    <div class="dox_tag_detail">
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_unsetPopupUnloadHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">parentName</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">windowRefObj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getWindowRefObj</span><span class="p">(</span><span class="nx">windowName</span><span class="p">,</span> <span class="nx">parentName</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">windowRefObj</span> <span class="o">||</span> <span class="o">!</span><span class="nx">windowRefObj</span><span class="p">.</span><span class="nx">popup</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">windowRefObj</span><span class="p">.</span><span class="nx">popup</span><span class="p">).</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;unload&#39;</span><span class="p">);</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-117" id="section-117">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><h3 id="event-handling">Event Handling</h3>

  </div>
  <div class="body">
  </div>
</div>
<div class="dox">
  <div class="summary"><p>Setup Event Bindings</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_setupEventBindings</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-118" id="section-118">&#182;</a>
</div>
<p>Bind main event handlers</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;storage&#39;</span><span class="p">,</span> <span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_changeHandler</span><span class="p">,</span> <span class="k">this</span><span class="p">));</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">onunload</span> <span class="o">=</span> <span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_unloadHandler</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">closeWindowHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>
            <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sticky</span> <span class="o">||</span> <span class="nx">options</span><span class="p">.</span><span class="nx">silent</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">makeWindowCloseSilent</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nb">window</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
        <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">closeSilentHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">,</span> <span class="nx">silent</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sticky</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">sticky</span><span class="o">--</span> <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">sticky</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">closeSilent</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="nb">window</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">pingWindowRequestHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
                <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;pingWindowResponse&#39;</span><span class="p">,</span>
                <span class="nx">to</span><span class="o">:</span>  <span class="nx">evt</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span>
                <span class="nx">parent</span><span class="o">:</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">fromParent</span>
            <span class="p">});</span>
        <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">pingWindowResponseHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">pingDfd</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="kc">true</span><span class="p">]);</span>
        <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">resizeByHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">,</span> <span class="nx">xDiff</span><span class="p">,</span> <span class="nx">yDiff</span><span class="p">){</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;moving&#39;</span><span class="p">,</span> <span class="nx">xDiff</span><span class="p">,</span> <span class="nx">yDiff</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">moveWindowBy</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="nx">xDiff</span><span class="p">,</span> <span class="nx">yDiff</span><span class="p">);</span>
        <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-119" id="section-119">&#182;</a>
</div>
<p>Bind event Handlers for position and size</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">windowPositionTimerHandler</span> <span class="o">=</span> <span class="nx">bind</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPos</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentPos</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="kd">var</span> <span class="nx">newPos</span> <span class="o">=</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">screenX</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">screenY</span><span class="p">};</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_isEqual</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPos</span><span class="p">,</span><span class="nx">newPos</span><span class="p">)){</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">setCurrentWindow</span><span class="p">();</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">currentPos</span> <span class="o">=</span> <span class="nx">newPos</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">},</span> <span class="k">this</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">windowResizeHandler</span> <span class="o">=</span> <span class="nx">_debounce</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
            <span class="nx">_this</span><span class="p">.</span><span class="nx">setCurrentWindow</span><span class="p">();</span>
        <span class="p">},</span> <span class="mi">300</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-120" id="section-120">&#182;</a>
</div>
<p>Bind Event Handler for window closes</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;closeWindow&#39;</span><span class="p">,</span> <span class="nx">closeWindowHandler</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-121" id="section-121">&#182;</a>
</div>
<p>Bind Event Handler for silent window closes</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;closeSilent&#39;</span><span class="p">,</span> <span class="nx">closeSilentHandler</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-122" id="section-122">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Bind Close Event Handler for reopen window
Note:This handler is only for sub windows since
master windows cannot close and open
themselves. That logic is handled within
the this.popupWindow itself</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pingWindowRequest&#39;</span><span class="p">,</span> <span class="nx">pingWindowRequestHandler</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pingWindowResponse&#39;</span><span class="p">,</span> <span class="nx">pingWindowResponseHandler</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-123" id="section-123">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>For only non-external windows</p>

  </div>
  <div class="body">
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">!=</span> <span class="s2">&quot;external&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">windowPosTimer</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">windowPositionTimerHandler</span><span class="p">,</span> <span class="mi">5000</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-124" id="section-124">&#182;</a>
</div>
<p>Bind event handler for resize</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;resize&#39;</span><span class="p">,</span> <span class="nx">windowResizeHandler</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-125" id="section-125">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Change handler to listen for localStorage changes.</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">evt

</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_changeHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">Config</span><span class="p">.</span><span class="nx">isValidWindow</span><span class="p">(</span><span class="nb">window</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="kd">var</span> <span class="nx">versionCheck</span> <span class="o">=</span> <span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">key</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">||</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">key</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">+</span> <span class="s1">&#39;setBit&#39;</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">versionCheck</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_checkMessages</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-126" id="section-126">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Handler fired before any window is closed.</p>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">evt

</span>
    </div>
  </div>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">_unloadHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-127" id="section-127">&#182;</a>
</div>
<p>If the window is the master</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;master&quot;</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-128" id="section-128">&#182;</a>
</div>
<p>If its not close silent</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">closeSilent</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">closeAllChildren</span><span class="p">({</span>
                    <span class="nx">silent</span><span class="o">:</span> <span class="kc">true</span>
                <span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
                <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;windowClosed:&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
                <span class="nx">to</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span>
            <span class="p">},</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-129" id="section-129">&#182;</a>
</div>
<p>Its a sub window
If it has NOT been flagged to be silently closed
Fire the close function</p>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">closeSilent</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_removeWindowFromWindows</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_setWindowToClosed</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_clearCachedMessagesForWindow</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">updateMemory</span><span class="p">();</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="nx">WindowManager</span><span class="p">;</span>
<span class="p">}));</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
